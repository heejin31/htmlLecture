<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
<style>
	ul{
		list-style:none;
		margin:0;
		padding:0;
		max-width: 1000px;
		margin: 0 auto;
		display: flex;
		justify-content: center;
	}
	ul li{
		width: 120px;
		cursor:pointer;
	}
</style>
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
	$(document).ready(
		function(){
				/*
				ul을 가지고 있는 li에 스타일을 지정하시오(배경색지정)
				$("li").has("ul").css("background","gray");
				*/
				$("li").has("ul").children("ul").before("<i class='ion-arrow-down-b'></i>");
				$("li").has("ul").children("ul").hide();

				//ul을 가지고 있는 li를 클릭하면 실행하시오(클릭한li의 ul을 slideToggle하시오)
				var a=0;
				var cu;
				var cu2;
				console.log("a의 초기값 :"+a);
				$("li").has("ul").click(
						function(){
							$(this).children("ul").slideToggle();
							$(this).siblings().children("ul").slideUp();
                            cu=$(this).attr("data-n");
							if(cu==0){
								if(a==0){
									$(this).children("i").attr("class","ion-arrow-up-b");//펼친 상태
									console.log("cu:"+cu+"펼침");
                                    a=1;
								}else{
									$(this).children("i").attr("class","ion-arrow-down-b");//닫힌 상태
									console.log("cu:"+cu+"닫힘");
                                    a=0;
								}
							}else if(cu==1){
								if(a==0){
									$(this).children("i").attr("class","ion-arrow-up-b");//펼친 상태
									console.log("cu:"+cu+"펼침");
                                    a=1;
								}else{
									$(this).children("i").attr("class","ion-arrow-down-b");//닫힌 상태
									console.log("cu:"+cu+"닫힘");
                                    a=0;
								}
								
							}else if(cu==2){
								if(a==0){
									$(this).children("i").attr("class","ion-arrow-up-b");//펼친 상태
									console.log("cu:"+cu+"펼침");
                                    a=1;
								}else{
									$(this).children("i").attr("class","ion-arrow-down-b");//닫힌 상태
									console.log("cu:"+cu+"닫힘");
                                    a=0;
								}
								
							}
							// cu=$(this).attr("data-n");
							 $(this).siblings().children("i").attr("class","ion-arrow-down-b");//닫힌 상태

						}
				);
		}
	);
</script>
</head>

<body>
<div id="container">
	<ul>
    	<li data-n="0">1
        		<ul>
            	<li>1-1</li>
              <li>1-2</li>
              <li>1-3</li>
            </ul>
        </li>
        <li>2</li>
        <li data-n="1">3
        		<ul>
            	<li>3-1</li>
              <li>3-2</li>
            </ul>
        </li>
        <li data-n="2">4
			<ul>
				<li>4-1</li>
				<li>4-2</li>
			</ul>
		</li>
    </ul>
</div>

</body>
</html>
